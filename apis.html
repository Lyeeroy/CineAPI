<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CineAPI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Style for the tabs */
      .tabs {
        display: flex;
        border-bottom: 1px solid #ddd;
      }

      .tab {
        padding: 10px 15px;
        cursor: pointer;
        border: none;
        background-color: transparent;
        border-bottom: 2px solid transparent; /* Initially no border */
      }

      .tab.active {
        border-bottom: 2px solid black; /* Active tab has a border */
        font-weight: bold;
      }

      .tab-content {
        display: none; /* Initially hide all content */
        padding: 20px;
      }

      .tab-content.active {
        display: block; /* Show content of active tab */
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900 p-6">
    <div class="w-full mx-auto md:w-full lg:w-1/2 sm:w-full flex flex-col">
      <h1 class="text-3xl font-bold mb-6 text-center p-4">
        üìã URL List Manager
      </h1>

      <div class="tabs transition duration-500 ease-in-out">
        <button
          class="tab active transform transition duration-500 ease-in-out"
          data-tab="url-management"
        >
          URL Management
        </button>
        <button
          class="tab transform transition duration-500 ease-in-out"
          data-tab="import-export"
        >
          Import / Export
        </button>
        <button
          class="tab transform transition duration-500 ease-in-out"
          data-tab="documentation"
          id="docs-btn"
        >
          Documentation
        </button>
      </div>

      <div id="url-management" class="tab-content active">
        <div
          id="url-list"
          class="p-4 space-y-3 overflow-y-auto border rounded-lg max-h-[40vh] min-h-[40vh]"
        ></div>
        <button
          id="add-url"
          class="bg-black text-white px-4 py-3 rounded-lg w-full mt-4"
        >
          + Add URL
        </button>
        <!--save button-->
        <button
          id="save-btn"
          class="bg-green-600 text-white px-4 py-2 rounded-lg w-full mt-4"
        >
          Save
        </button>
      </div>

      <div id="import-export" class="tab-content">
        <div class="flex space-x-2">
          <button
            id="export-btn"
            class="bg-black text-white px-4 py-2 rounded-lg w-1/2"
          >
            ‚Üë Export
          </button>
          <button
            id="import-btn"
            class="bg-black text-white px-4 py-2 rounded-lg w-1/2"
          >
            ‚Üì Import
          </button>
        </div>
        <select id="export-format" class="border p-3 rounded-lg w-full mt-3">
          <option value="export-code" selected>Export code</option>
          <option value="export-url">Export URL</option>
          <option value="export-url-redirect">Export URL with redirect</option>
        </select>
        <div class="flex space-x-2 mt-3">
          <textarea
            id="import-input"
            placeholder="Paste code to import or see exported code here"
            class="border p-3 rounded-lg w-full h-24 resize-none"
          ></textarea>
          <button
            id="copy-btn"
            class="w-[10%] bg-black text-white px-4 py-2 rounded-lg hover:bg-green-700"
          >
            <svg
              viewBox="0 0 24 24"
              fill="white"
              xmlns="http://www.w3.org/2000/svg"
              class="w-full h-full"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M21 8C21 6.34315 19.6569 5 18 5H10C8.34315 5 7 6.34315 7 8V20C7 21.6569 8.34315 23 10 23H18C19.6569 23 21 21.6569 21 20V8ZM19 8C19 7.44772 18.5523 7 18 7H10C9.44772 7 9 7.44772 9 8V20C9 20.5523 9.44772 21 10 21H18C18.5523 21 19 20.5523 19 20V8Z"
                  fill="currentColor"
                ></path>
                <path
                  d="M6 3H16C16.5523 3 17 2.55228 17 2C17 1.44772 16.5523 1 16 1H6C4.34315 1 3 2.34315 3 4V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V4C5 3.44772 5.44772 3 6 3Z"
                  fill="currentColor"
                ></path>
              </g>
            </svg>
          </button>
        </div>
      </div>

      <div id="documentation" class="tab-content">
        <h2 class="text-xl font-bold mb-2">Quick Import:</h2>
        <p>
          Use the following URL format to import data automatically. If you want
          to redirect to <code>/index.html</code> after importing, add
          <code>&redirect=true</code> in the URL.
        </p>
        <pre class="bg-gray-100 p-3 rounded-lg text-sm mt-2">
/apis.html?import={code}&redirect=true</pre
        >

        <h2 class="text-xl font-bold mt-4 mb-2">URL Syntax:</h2>
        <pre class="bg-gray-100 p-3 rounded-lg text-sm">
example.com/#type/#id/#season/#episode</pre
        >
        <p class="mb-2 mt-2">Manual Override:</p>
        <pre class="bg-gray-100 p-3 rounded-lg text-sm">
example.com/#type&tv=series&movie=film</pre
        >

        <p class="mt-2">
          - <strong>#type</strong> is automatically filled as <em>movie</em> or
          <em>tv show</em> based on the TMDB ID.<br />- <strong>#id</strong>,
          <strong>#season</strong>, and <strong>#episode</strong> are
          placeholders that will be replaced dynamically.
        </p>

        <h2 class="text-xl font-bold mt-4 mb-2">Example:</h2>
        <pre class="bg-gray-100 p-3 rounded-lg text-sm">
example.com/movie/12345/1/2</pre
        >
        <p class="mt-2">
          In this example, the <strong>#type</strong> will be movie, the
          <strong>#id</strong> 12345 will be replaced with the TMDB ID of the
          movie. The <strong>#season</strong> and
          <strong>#episode</strong> corresponds to a movie, with season 1 and
          episode 2.
        </p>
        <h2 class="text-xl font-bold mt-4 mb-2">Naming a Source</h2>
        <pre class="bg-gray-100 p-3 rounded-lg text-sm">
Example:https://example.com</pre
        >
      </div>

      <div class="p-4 border-t mt-4 flex-shrink-0">
        <button
          id="close-btn"
          class="bg-black text-white px-4 py-2 rounded-lg w-full hover:bg-red-700"
          onclick="window.location.href = 'index.html'"
        >
          Close
        </button>
        <button
          id="debug-btn"
          class="bg-black text-white px-4 py-2 rounded-lg w-full mt-4"
        >
          üõ† Debug Panel
        </button>

        <p class="text-sm text-center mt-4 opacity-50">
          Note: The URLs are stored in Local Storage. This page does not hold
          any data.
        </p>
      </div>
    </div>

    <div
      id="debug-panel"
      class="hidden fixed top-10 left-1/2 transform -translate-x-1/2 bg-white border rounded-2xl shadow-2xl p-6 w-96 z-20 max-h-[90vh] overflow-y-auto"
    >
      <h2 class="text-2xl font-bold mb-4 text-center">Debug Panel üìù</h2>
      <div id="debug-info" class="text-sm space-y-4"></div>
      <button
        id="close-debug"
        class="bg-black text-white px-4 py-2 rounded-lg w-full mt-4"
      >
        Close
      </button>
    </div>

    <script src="src/apis.js"></script>
    <script>
      const tabs = document.querySelectorAll(".tab");
      const tabContents = document.querySelectorAll(".tab-content");

      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          const targetTab = document.querySelector(`#${tab.dataset.tab}`);

          // Hide all tab contents
          tabContents.forEach((content) => content.classList.remove("active"));

          // Show the selected tab content
          targetTab.classList.add("active");

          // Set active class on tabs
          tabs.forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
        });
      });

      // Initially show the first tab
      tabs[0].click();

      // When +Add URL clicked, scroll down on the input field
      document.getElementById("add-url").addEventListener("click", () => {
        const urlList = document.getElementById("url-list");
        urlList.scrollTo({ top: urlList.scrollHeight, behavior: "smooth" });
      });

      document.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        console.log("URL Parameters:", urlParams.toString());

        const url = urlParams.get("url");
        console.log("Extracted URL Parameter:", url);

        if (url === "docs") {
          const docsBtn = document.getElementById("docs-btn");
          console.log("docsBtn:", docsBtn);

          if (docsBtn) {
            docsBtn.click();
            console.log("Button clicked!");
          } else {
            console.error("docs-btn not found in the DOM");
          }
        }
      });
    </script>
  </body>
</html>
